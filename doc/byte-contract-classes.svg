<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="761px" preserveAspectRatio="none" style="width:1414px;height:761px;" version="1.1" viewBox="0 0 1414 761" width="1414px" zoomAndPan="magnify"><defs><filter height="300%" id="f10cy03l8qlk03" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster element.protocol--><polygon fill="#FFFFFF" filter="url(#f10cy03l8qlk03)" points="22,24,148,24,155,49.1201,913,49.1201,913,749,22,749,22,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="155" y1="49.1201" y2="49.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="26" y="42.0439">element.protocol</text><!--cluster element.data--><polygon fill="#DDDDDD" filter="url(#f10cy03l8qlk03)" points="937,52,1034,52,1041,77.1201,1392,77.1201,1392,373.5,937,373.5,937,52" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="937" x2="1041" y1="77.1201" y2="77.1201"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="941" y="70.0439">element.data</text><!--class ByteContractElement--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="78.0459" id="ByteContractElement" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="264" y="655"/><ellipse cx="279" cy="671" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M275.875,667 L275.875,665.3125 L281.8125,665.3125 L281.8125,667 L279.9375,667 Q279.7813,667 279.7344,667.0313 Q279.6875,667.0625 279.6875,667.1094 L279.6875,675.2031 Q279.6875,675.25 279.7344,675.2813 Q279.7813,675.3125 279.9375,675.3125 L281.8125,675.3125 L281.8125,677 L275.875,677 L275.875,675.3125 L277.75,675.3125 Q277.9531,675.3125 277.9766,675.2969 Q278,675.2813 278,675.2031 L278,667.1094 Q278,667.0313 277.9766,667.0156 Q277.9531,667 277.75,667 L275.875,667 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="116" x="293" y="676.5576">ByteContractElement</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="265" x2="411" y1="687" y2="687"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="265" x2="411" y1="695" y2="695"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="270" y="711.606">String getName()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="270" y="726.6289">int getContentLength()</text><!--class AbstractByteContractProtocolElement--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="93.0688" id="AbstractByteContractProtocolElement" style="stroke: #A80036; stroke-width: 1.5;" width="238" x="371" y="486"/><ellipse cx="386" cy="502" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M387.0781,503 L384.2656,503 L383.4531,504.6094 Q383.4063,504.7656 383.4063,504.9063 Q383.4063,505.0938 383.4531,505.2031 Q383.5,505.3125 383.7188,505.3125 L384.2656,505.3125 L384.2656,507 L381,507 L381,505.3125 L381.5625,505.3125 Q381.7813,505.3125 381.8984,505.25 Q382.0156,505.1875 382.0625,505 L385.1563,495.3125 L386.5313,495.3125 L389.5625,504.8906 Q389.6563,505.125 389.7969,505.2188 Q389.9375,505.3125 390.125,505.3125 L390.6875,505.3125 L390.6875,507 L387.0313,507 L387.0313,505.3125 L387.6406,505.3125 Q387.8125,505.3125 387.8203,505.2969 Q387.8281,505.2813 387.8281,505.2188 Q387.8281,505.0469 387.7969,504.9531 L387.0781,503 Z M381.8594,506 L381.8594,506 Z M382.5313,506 L382.5313,506 Z M387.25,506 L387.25,506 Z M388.375,506 L388.375,506 Z M385.5781,497.4063 L385.6563,497.4063 L384.7969,501.3125 L386.75,501.3125 L385.5781,497.4063 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="206" x="400" y="507.5576">AbstractByteContractProtocolElement</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="372" x2="608" y1="518" y2="518"/><polygon fill="none" points="382,526.0115,386,530.0115,382,534.0115,378,530.0115" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="391" y="534.606">String name</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="372" x2="608" y1="541.0229" y2="541.0229"/><ellipse cx="382" cy="554.0344" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="391" y="557.6289">String getName()</text><ellipse cx="382" cy="569.0574" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="391" y="572.6519">void setName(name:String)</text><!--class ByteContractProtocolSegment--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="153.1606" id="ByteContractProtocolSegment" style="stroke: #A80036; stroke-width: 1.5;" width="335" x="304.5" y="257"/><ellipse cx="385.75" cy="273" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M385.4375,279 Q383.5,279 382.375,277.5703 Q381.25,276.1406 381.25,273.1875 Q381.25,270.6875 382.4375,269 Q383.625,267.3125 385.6875,267.3125 Q386.1406,267.3125 386.5781,267.3125 Q387.0156,267.3125 387.3281,267.3125 Q387.5781,267.3125 387.7422,267.3125 Q387.9063,267.3125 388.3125,267.3125 L389.0156,271 L387.9531,271 Q387.5156,269.9063 386.9453,269.4531 Q386.375,269 385.4531,269 Q384.2969,269 383.6172,270.1797 Q382.9375,271.3594 382.9375,273.1875 Q382.9375,275.2031 383.4609,276.2578 Q383.9844,277.3125 385.3906,277.3125 Q386.3125,277.3125 386.9609,276.7422 Q387.6094,276.1719 387.9531,274.7813 L388.9844,275.2969 Q388.5938,277.0469 387.6563,278.0234 Q386.7188,279 385.4375,279 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="164" x="406.25" y="278.5576">ByteContractProtocolSegment</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="305.5" x2="638.5" y1="289" y2="289"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="312.5" y="299.0115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="324.5" y="305.606">int length</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="312.5" y="314.0344"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="324.5" y="320.6289">List&lt;ByteContractElement&gt; content</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="305.5" x2="638.5" y1="327.0459" y2="327.0459"/><ellipse cx="315.5" cy="340.0574" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="309" x="324.5" y="343.6519">ByteContractProtocolSegment parseSegment(JSONArray array)</text><ellipse cx="315.5" cy="355.0803" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="203" x="324.5" y="358.6748">void addElement(ByteContractElement ele)</text><ellipse cx="315.5" cy="370.1033" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="324.5" y="373.6978">int getContentLength()</text><ellipse cx="315.5" cy="385.1262" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="324.5" y="388.7207">boolean isLengthConst()</text><ellipse cx="315.5" cy="400.1492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="252" x="324.5" y="403.7437">int getRealContentLength(JSONObject segmentData)</text><path d="M38.5,310.5 L38.5,356.0088 A0,0 0 0 0 38.5,356.0088 L269.5,356.0088 A0,0 0 0 0 269.5,356.0088 L269.5,337.5 L304.324,333.5 L269.5,329.5 L269.5,320.5 L259.5,310.5 L38.5,310.5 A0,0 0 0 0 38.5,310.5 " fill="#FBFB77" filter="url(#f10cy03l8qlk03)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M259.5,310.5 L259.5,320.5 L269.5,320.5 L259.5,310.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="44.5" y="330.3979">由多个Field或者多个Segment组成，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="44.5" y="348.1523">支持嵌套定义</text><!--class ByteContractProtocolField--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="108.0918" id="ByteContractProtocolField" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="674.5" y="279.5"/><ellipse cx="689.5" cy="295.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M689.1875,301.5 Q687.25,301.5 686.125,300.0703 Q685,298.6406 685,295.6875 Q685,293.1875 686.1875,291.5 Q687.375,289.8125 689.4375,289.8125 Q689.8906,289.8125 690.3281,289.8125 Q690.7656,289.8125 691.0781,289.8125 Q691.3281,289.8125 691.4922,289.8125 Q691.6563,289.8125 692.0625,289.8125 L692.7656,293.5 L691.7031,293.5 Q691.2656,292.4063 690.6953,291.9531 Q690.125,291.5 689.2031,291.5 Q688.0469,291.5 687.3672,292.6797 Q686.6875,293.8594 686.6875,295.6875 Q686.6875,297.7031 687.2109,298.7578 Q687.7344,299.8125 689.1406,299.8125 Q690.0625,299.8125 690.7109,299.2422 Q691.3594,298.6719 691.7031,297.2813 L692.7344,297.7969 Q692.3438,299.5469 691.4063,300.5234 Q690.4688,301.5 689.1875,301.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="703.5" y="301.0576">ByteContractProtocolField</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="675.5" x2="846.5" y1="311.5" y2="311.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="682.5" y="321.5115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="694.5" y="328.106">int size</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="682.5" y="336.5344"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="694.5" y="343.1289">DataEnum type</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="682.5" y="351.5574"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="694.5" y="358.1519">String desc</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="682.5" y="366.5803"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="75" x="694.5" y="373.1748">FuncEnum func</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="675.5" x2="846.5" y1="379.5918" y2="379.5918"/><path d="M613.5,62 L613.5,196.2808 A0,0 0 0 0 613.5,196.2808 L752.956,196.2808 L759.426,279.375 L760.956,196.2808 L896.5,196.2808 A0,0 0 0 0 896.5,196.2808 L896.5,72 L886.5,62 L613.5,62 A0,0 0 0 0 613.5,62 " fill="#FBFB77" filter="url(#f10cy03l8qlk03)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M886.5,62 L886.5,72 L896.5,72 L886.5,62 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="619.5" y="81.8979">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="631.5" y="99.6523">"name":, //字段名</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="631.5" y="117.4067">"size":, //字节大小</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="631.5" y="135.1611">"type": ,//数据类型 int、short 、long、array</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="631.5" y="152.9155">"func": //字段作用，1.正常占位normal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="663.5" y="170.6699">//2.标识下一个元素的循环个数 loop</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="619.5" y="188.4243">}</text><!--class ByteContractProtocolHeader--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="48" id="ByteContractProtocolHeader" style="stroke: #A80036; stroke-width: 1.5;" width="187" x="391.5" y="105"/><ellipse cx="406.5" cy="121" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M406.1875,127 Q404.25,127 403.125,125.5703 Q402,124.1406 402,121.1875 Q402,118.6875 403.1875,117 Q404.375,115.3125 406.4375,115.3125 Q406.8906,115.3125 407.3281,115.3125 Q407.7656,115.3125 408.0781,115.3125 Q408.3281,115.3125 408.4922,115.3125 Q408.6563,115.3125 409.0625,115.3125 L409.7656,119 L408.7031,119 Q408.2656,117.9063 407.6953,117.4531 Q407.125,117 406.2031,117 Q405.0469,117 404.3672,118.1797 Q403.6875,119.3594 403.6875,121.1875 Q403.6875,123.2031 404.2109,124.2578 Q404.7344,125.3125 406.1406,125.3125 Q407.0625,125.3125 407.7109,124.7422 Q408.3594,124.1719 408.7031,122.7813 L409.7344,123.2969 Q409.3438,125.0469 408.4063,126.0234 Q407.4688,127 406.1875,127 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="155" x="420.5" y="126.5576">ByteContractProtocolHeader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="392.5" x2="577.5" y1="137" y2="137"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="392.5" x2="577.5" y1="145" y2="145"/><!--class ByteContractProtocolBody--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="48" id="ByteContractProtocolBody" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="183.5" y="105"/><ellipse cx="198.5" cy="121" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M198.1875,127 Q196.25,127 195.125,125.5703 Q194,124.1406 194,121.1875 Q194,118.6875 195.1875,117 Q196.375,115.3125 198.4375,115.3125 Q198.8906,115.3125 199.3281,115.3125 Q199.7656,115.3125 200.0781,115.3125 Q200.3281,115.3125 200.4922,115.3125 Q200.6563,115.3125 201.0625,115.3125 L201.7656,119 L200.7031,119 Q200.2656,117.9063 199.6953,117.4531 Q199.125,117 198.2031,117 Q197.0469,117 196.3672,118.1797 Q195.6875,119.3594 195.6875,121.1875 Q195.6875,123.2031 196.2109,124.2578 Q196.7344,125.3125 198.1406,125.3125 Q199.0625,125.3125 199.7109,124.7422 Q200.3594,124.1719 200.7031,122.7813 L201.7344,123.2969 Q201.3438,125.0469 200.4063,126.0234 Q199.4688,127 198.1875,127 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="141" x="212.5" y="126.5576">ByteContractProtocolBody</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="184.5" x2="355.5" y1="137" y2="137"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="184.5" x2="355.5" y1="145" y2="145"/><!--class DataEnum--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="123.1147" id="DataEnum" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="771.5" y="471"/><ellipse cx="801.8" cy="487" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M797.8625,483 L797.8625,481.3125 L805.5656,481.3125 L806.6594,484 L805.6906,484 Q805.0344,483.4531 804.3938,483.2266 Q803.7531,483 802.9875,483 L800.8313,483 Q800.6125,483 800.5109,483 Q800.4094,483 800.4875,483 L800.4875,485.3125 L801.9563,485.3125 Q802.4094,485.3125 802.6047,485.0469 Q802.8,484.7813 802.8,484.125 L802.8,483.3125 L804.4875,483.3125 L804.4875,489 L802.8,489 L802.8,488.3594 Q802.8,487.6406 802.5969,487.3203 Q802.3938,487 801.9563,487 L800.4875,487 L800.4875,491.1719 Q800.4875,491.2344 800.55,491.2734 Q800.6125,491.3125 800.8,491.3125 L802.7219,491.3125 Q803.8469,491.3125 804.4719,490.8828 Q805.0969,490.4531 805.5813,489.3125 L806.5813,489.3125 L805.6281,493 L797.8,493 L797.8,491.3125 L798.5344,491.3125 Q798.7531,491.3125 798.7766,491.2969 Q798.8,491.2813 798.8,491.2031 L798.8,483.1094 Q798.8,483.0313 798.7766,483.0156 Q798.7531,483 798.5344,483 L797.8625,483 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="59" x="819.2" y="492.5576">DataEnum</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="772.5" x2="895.5" y1="503" y2="503"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="11" x="777.5" y="519.606">Int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="26" x="777.5" y="534.6289">Short</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="24" x="777.5" y="549.6519">Long</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="777.5" y="564.6748">ByteArray</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="772.5" x2="895.5" y1="571.0918" y2="571.0918"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="777.5" y="587.6978">DataEnum(String name)</text><!--class FuncEnum--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="78.0459" id="FuncEnum" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="644" y="493.5"/><ellipse cx="659" cy="509.5" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M655.0625,505.5 L655.0625,503.8125 L662.7656,503.8125 L663.8594,506.5 L662.8906,506.5 Q662.2344,505.9531 661.5938,505.7266 Q660.9531,505.5 660.1875,505.5 L658.0313,505.5 Q657.8125,505.5 657.7109,505.5 Q657.6094,505.5 657.6875,505.5 L657.6875,507.8125 L659.1563,507.8125 Q659.6094,507.8125 659.8047,507.5469 Q660,507.2813 660,506.625 L660,505.8125 L661.6875,505.8125 L661.6875,511.5 L660,511.5 L660,510.8594 Q660,510.1406 659.7969,509.8203 Q659.5938,509.5 659.1563,509.5 L657.6875,509.5 L657.6875,513.6719 Q657.6875,513.7344 657.75,513.7734 Q657.8125,513.8125 658,513.8125 L659.9219,513.8125 Q661.0469,513.8125 661.6719,513.3828 Q662.2969,512.9531 662.7813,511.8125 L663.7813,511.8125 L662.8281,515.5 L655,515.5 L655,513.8125 L655.7344,513.8125 Q655.9531,513.8125 655.9766,513.7969 Q656,513.7813 656,513.7031 L656,505.6094 Q656,505.5313 655.9766,505.5156 Q655.9531,505.5 655.7344,505.5 L655.0625,505.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="673" y="515.0576">FuncEnum</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="645" x2="735" y1="525.5" y2="525.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="650" y="542.106">Normal</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="24" x="650" y="557.1289">Loop</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="645" x2="735" y1="563.5459" y2="563.5459"/><!--class ProtocolEnum--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="78.0459" id="ProtocolEnum" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="38" y="90"/><ellipse cx="53" cy="106" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M49.0625,102 L49.0625,100.3125 L56.7656,100.3125 L57.8594,103 L56.8906,103 Q56.2344,102.4531 55.5938,102.2266 Q54.9531,102 54.1875,102 L52.0313,102 Q51.8125,102 51.7109,102 Q51.6094,102 51.6875,102 L51.6875,104.3125 L53.1563,104.3125 Q53.6094,104.3125 53.8047,104.0469 Q54,103.7813 54,103.125 L54,102.3125 L55.6875,102.3125 L55.6875,108 L54,108 L54,107.3594 Q54,106.6406 53.7969,106.3203 Q53.5938,106 53.1563,106 L51.6875,106 L51.6875,110.1719 Q51.6875,110.2344 51.75,110.2734 Q51.8125,110.3125 52,110.3125 L53.9219,110.3125 Q55.0469,110.3125 55.6719,109.8828 Q56.2969,109.4531 56.7813,108.3125 L57.7813,108.3125 L56.8281,112 L49,112 L49,110.3125 L49.7344,110.3125 Q49.9531,110.3125 49.9766,110.2969 Q50,110.2813 50,110.2031 L50,102.1094 Q50,102.0313 49.9766,102.0156 Q49.9531,102 49.7344,102 L49.0625,102 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="67" y="111.5576">ProtocolEnum</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="147" y1="122" y2="122"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="44" y="138.606">SEND</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="42" x="44" y="153.6289">RECEIVE</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="147" y1="160.0459" y2="160.0459"/><!--class ByteContract--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="78.0459" id="ByteContract" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="1254.5" y="90"/><ellipse cx="1278.5" cy="106" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1278.1875,112 Q1276.25,112 1275.125,110.5703 Q1274,109.1406 1274,106.1875 Q1274,103.6875 1275.1875,102 Q1276.375,100.3125 1278.4375,100.3125 Q1278.8906,100.3125 1279.3281,100.3125 Q1279.7656,100.3125 1280.0781,100.3125 Q1280.3281,100.3125 1280.4922,100.3125 Q1280.6563,100.3125 1281.0625,100.3125 L1281.7656,104 L1280.7031,104 Q1280.2656,102.9063 1279.6953,102.4531 Q1279.125,102 1278.2031,102 Q1277.0469,102 1276.3672,103.1797 Q1275.6875,104.3594 1275.6875,106.1875 Q1275.6875,108.2031 1276.2109,109.2578 Q1276.7344,110.3125 1278.1406,110.3125 Q1279.0625,110.3125 1279.7109,109.7422 Q1280.3594,109.1719 1280.7031,107.7813 L1281.7344,108.2969 Q1281.3438,110.0469 1280.4063,111.0234 Q1279.4688,112 1278.1875,112 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="1294.5" y="111.5576">ByteContract</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1255.5" x2="1374.5" y1="122" y2="122"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1262.5" y="132.0115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="1274.5" y="138.606">JSONObject header</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1262.5" y="147.0344"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="1274.5" y="153.6289">JSONObject body</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1255.5" x2="1374.5" y1="160.0459" y2="160.0459"/><!--class JSONObject--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="48" id="JSONObject" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="1036.5" y="309.5"/><ellipse cx="1051.5" cy="325.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1051.1875,331.5 Q1049.25,331.5 1048.125,330.0703 Q1047,328.6406 1047,325.6875 Q1047,323.1875 1048.1875,321.5 Q1049.375,319.8125 1051.4375,319.8125 Q1051.8906,319.8125 1052.3281,319.8125 Q1052.7656,319.8125 1053.0781,319.8125 Q1053.3281,319.8125 1053.4922,319.8125 Q1053.6563,319.8125 1054.0625,319.8125 L1054.7656,323.5 L1053.7031,323.5 Q1053.2656,322.4063 1052.6953,321.9531 Q1052.125,321.5 1051.2031,321.5 Q1050.0469,321.5 1049.3672,322.6797 Q1048.6875,323.8594 1048.6875,325.6875 Q1048.6875,327.7031 1049.2109,328.7578 Q1049.7344,329.8125 1051.1406,329.8125 Q1052.0625,329.8125 1052.7109,329.2422 Q1053.3594,328.6719 1053.7031,327.2813 L1054.7344,327.7969 Q1054.3438,329.5469 1053.4063,330.5234 Q1052.4688,331.5 1051.1875,331.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="1065.5" y="331.0576">JSONObject</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1037.5" x2="1134.5" y1="341.5" y2="341.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1037.5" x2="1134.5" y1="349.5" y2="349.5"/><!--class ByteContractSegmentData--><rect fill="#FEFECE" filter="url(#f10cy03l8qlk03)" height="63.0229" id="ByteContractSegmentData" style="stroke: #A80036; stroke-width: 1.5;" width="266" x="953" y="97.5"/><ellipse cx="1009.25" cy="113.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1008.9375,119.5 Q1007,119.5 1005.875,118.0703 Q1004.75,116.6406 1004.75,113.6875 Q1004.75,111.1875 1005.9375,109.5 Q1007.125,107.8125 1009.1875,107.8125 Q1009.6406,107.8125 1010.0781,107.8125 Q1010.5156,107.8125 1010.8281,107.8125 Q1011.0781,107.8125 1011.2422,107.8125 Q1011.4063,107.8125 1011.8125,107.8125 L1012.5156,111.5 L1011.4531,111.5 Q1011.0156,110.4063 1010.4453,109.9531 Q1009.875,109.5 1008.9531,109.5 Q1007.7969,109.5 1007.1172,110.6797 Q1006.4375,111.8594 1006.4375,113.6875 Q1006.4375,115.7031 1006.9609,116.7578 Q1007.4844,117.8125 1008.8906,117.8125 Q1009.8125,117.8125 1010.4609,117.2422 Q1011.1094,116.6719 1011.4531,115.2813 L1012.4844,115.7969 Q1012.0938,117.5469 1011.1563,118.5234 Q1010.2188,119.5 1008.9375,119.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="1029.75" y="119.0576">ByteContractSegmentData</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="954" x2="1218" y1="129.5" y2="129.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="954" x2="1218" y1="137.5" y2="137.5"/><ellipse cx="964" cy="150.5115" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="240" x="973" y="154.106">void addArrayElement(String name, Object object)</text><!--link AbstractByteContractProtocolElement to ByteContractElement--><path d="M432.609,593.722 C413.077,614.219 391.797,636.548 374.375,654.831 " fill="none" id="AbstractByteContractProtocolElement-ByteContractElement" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="427.578,588.856,446.443,579.206,437.713,598.514,427.578,588.856" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ByteContractProtocolSegment to AbstractByteContractProtocolElement--><path d="M480.738,430.13 C482.51,449.521 484.295,469.061 485.819,485.739 " fill="none" id="ByteContractProtocolSegment-AbstractByteContractProtocolElement" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="473.757,430.656,478.908,410.102,487.699,429.382,473.757,430.656" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ByteContractProtocolField to AbstractByteContractProtocolElement--><path d="M671.765,399.368 C632.91,427.614 588.286,460.052 552.977,485.719 " fill="none" id="ByteContractProtocolField-AbstractByteContractProtocolElement" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="667.727,393.649,688.02,387.552,675.959,404.974,667.727,393.649" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ByteContractProtocolHeader to ByteContractProtocolSegment--><path d="M482.213,173.411 C480.651,197.737 478.66,228.765 476.85,256.948 " fill="none" id="ByteContractProtocolHeader-ByteContractProtocolSegment" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="475.242,172.74,483.509,153.229,489.213,173.637,475.242,172.74" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ByteContractProtocolBody to ByteContractProtocolSegment--><path d="M307.5,167.593 C332.498,192.652 366.226,226.464 396.635,256.948 " fill="none" id="ByteContractProtocolBody-ByteContractProtocolSegment" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="302.341,172.333,293.172,153.229,312.253,162.445,302.341,172.333" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ByteContractProtocolField to DataEnum--><path d="M780.659,387.552 C789.604,411.691 800.277,440.494 809.717,465.97 " fill="none" id="ByteContractProtocolField-DataEnum" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="811.465,470.687,812.089,460.8579,809.7279,465.9985,804.5873,463.6373,811.465,470.687" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ByteContractProtocolField to FuncEnum--><path d="M741.88,387.552 C730.504,419.116 716.253,458.656 705.568,488.305 " fill="none" id="ByteContractProtocolField-FuncEnum" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="703.75,493.348,710.5649,486.2377,705.4455,488.6443,703.0389,483.5248,703.75,493.348" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ByteContractProtocolSegment to ByteContractElement--><path d="M339.544,419.35 C324.407,434.668 311.148,451.922 302,471 C275.71,525.825 294.725,596.095 313.655,642.733 " fill="none" id="ByteContractProtocolSegment-ByteContractElement" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="318.825,654.935,318.9971,645.0876,316.8745,650.3312,311.6309,648.2085,318.825,654.935" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="316.8745" x2="313.7535" y1="650.3312" y2="642.965"/><polygon fill="#A80036" points="349.192,410.064,342.0951,411.3422,340.5454,418.3849,347.6423,417.1066,349.192,410.064" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="303" y="538.8979">contains</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="330.1533" y="433.0979">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="307.6443" y="644.1285">n</text><!--link ByteContractSegmentData to JSONObject--><path d="M1086,160.755 C1086,194.964 1086,250.486 1086,289.105 " fill="none" id="ByteContractSegmentData-JSONObject" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1093,289.346,1086,309.346,1079,289.346,1093,289.346" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
package "element.protocol" {
  interface ByteContractElement {
      String getName()
      int getContentLength()
  }
  abstract class AbstractByteContractProtocolElement {
    #String name
    + String getName()
    + void setName(name:String)
  }
  class ByteContractProtocolSegment {
    - int length
    - List<ByteContractElement> content
    + ByteContractProtocolSegment parseSegment(JSONArray array)
    + void addElement(ByteContractElement ele)
    + int getContentLength()
    + boolean isLengthConst()
    + int getRealContentLength(JSONObject segmentData)
  }
  note left
  由多个Field或者多个Segment组成，
  支持嵌套定义
  end note
  class ByteContractProtocolField {
    - int size
    - DataEnum type
    - String desc
    - FuncEnum func
  }
  note top
   {
      "name":, //字段名
      "size":, //字节大小
      "type": ,//数据类型 int、short 、long、array
      "func": //字段作用，1.正常占位normal
              //2.标识下一个元素的循环个数 loop
   }
  end note
  class ByteContractProtocolHeader
  class ByteContractProtocolBody
  AbstractByteContractProtocolElement <|- - ByteContractElement
  ByteContractProtocolSegment <|- - AbstractByteContractProtocolElement
  ByteContractProtocolField <|- - AbstractByteContractProtocolElement
  ByteContractProtocolHeader <|- - ByteContractProtocolSegment
  ByteContractProtocolBody <|- - ByteContractProtocolSegment

  enum DataEnum {
    Int
    Short
    Long
    ByteArray

  DataEnum(String name)
  }

  enum FuncEnum {
    Normal
    Loop
  }

  enum ProtocolEnum {
    SEND
    RECEIVE
  }

  ByteContractProtocolField - -> DataEnum
  ByteContractProtocolField - -> FuncEnum
  ByteContractProtocolSegment "1" *- -> "n" ByteContractElement:contains

}
package "element.data" #DDDDDD{
  class ByteContract {
    - JSONObject header
    - JSONObject body
  }
  Class JSONObject
  class ByteContractSegmentData {
    + void addArrayElement(String name, Object object)
  }
  ByteContractSegmentData - -|> JSONObject
}

@enduml

PlantUML version 1.2018.11(Sun Sep 23 00:43:53 CST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b28
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>